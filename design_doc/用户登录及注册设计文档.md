# 用户登录及注册技术设计

### 文档版本控制

- Created: 2022年12月21日
- Tags: 技术设计
- 版本: v1

| 修订者 | 版本  | 备注 |
|-----| ----- | ---- |
| 王俊明 | 1.0.0 |    |
|     |       |      |

## 用户管理(平台级)

### 功能概述

本功能提供用户管理的登录注册,用户审核,租户client的申请,密码重置

### 表设计

```sql
```

### 接口设计

#### client信息(✔)

> GET /v1/user-login/client-domain/{domainName}/grant-type/{grantType}

- domainName: 根据域名查询登录时使用的client信息, 其域名包含测试域名,正式域名, 比如: dev.authorization.life, test.authorization.life, dev-api.authorization.life等.
- grantType: 授权类型, 为了在返回信息时做校验, 校验是否有此授权类型, 并在接口中返回此授权类型. 
- 根据域名查询client信息, 如果根据域名参数没有查到数据, 则默认查询 www.authorization.life 的client信息.
- 其中 client_secret 存储的是 BCryptPasswordEncoder 加密后的密文, 所以表中需要在 client_secret_bak 字段中保存 真正的明文, 并在接口中设置到 client_secret 字段中.

#### 用户注册

> POST /v1/{tenantId}/xxx

- 接收员工姓名，法律实体，职位职级，汇报上级，部门名称，所在地区，邮箱，手机号码，财务信息包括成本中心，产品线，金额授权。

#### 用户登录

> POST /v1/{tenantId}/xxx

- 接收员工姓名，法律实体，职位职级，汇报上级，部门名称，所在地区，邮箱，手机号码，财务信息包括成本中心，产品线，金额授权。

#### 获取验证码图片

> POST /v1/{tenantId}/xxx

- 接收员工姓名，法律实体，职位职级，汇报上级，部门名称，所在地区，邮箱，手机号码，财务信息包括成本中心，产品线，金额授权。

#### 发送手机验证码

> POST /v1/{tenantId}/xxx

- 接收员工姓名，法律实体，职位职级，汇报上级，部门名称，所在地区，邮箱，手机号码，财务信息包括成本中心，产品线，金额授权。

#### 获取登录时所需client信息

> POST /v1/{tenantId}/xxx

- 接收员工姓名，法律实体，职位职级，汇报上级，部门名称，所在地区，邮箱，手机号码，财务信息包括成本中心，产品线，金额授权。

#### 用户列表

> POST /v1/{tenantId}/xxx

- 接收员工姓名，法律实体，职位职级，汇报上级，部门名称，所在地区，邮箱，手机号码，财务信息包括成本中心，产品线，金额授权。

#### 用户审核通过

> POST /v1/{tenantId}/xxx

- 接收员工姓名，法律实体，职位职级，汇报上级，部门名称，所在地区，邮箱，手机号码，财务信息包括成本中心，产品线，金额授权。

#### 用户审核拒绝

> POST /v1/{tenantId}/xxx

- 接收员工姓名，法律实体，职位职级，汇报上级，部门名称，所在地区，邮箱，手机号码，财务信息包括成本中心，产品线，金额授权。

#### 重置密码

> POST /v1/{tenantId}/xxx

- 接收员工姓名，法律实体，职位职级，汇报上级，部门名称，所在地区，邮箱，手机号码，财务信息包括成本中心，产品线，金额授权。

### 常量定义

| 字段 | 值   | 含义 |
| ---- | ---- | ---- |
|      |      |      |

### 值定义

| 值说明 | key  | value |
| ------ | ---- | ----- |
|        |      |       |

### 备注

- 

## 问题记录

- 
